<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Iniciar sesión</title>
<style>
  body{margin:0;font-family:Arial;background:#f4f4f4;color:#333}
  .wrap{max-width:420px;margin:80px auto;padding:20px}
  .card{background:#fff;padding:18px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.08)}
  h1{text-align:center;color:#1a4b27}
  input{width:100%;padding:12px;border-radius:8px;border:1px solid #ccc;margin-bottom:12px;box-sizing:border-box}
  .btn{padding:12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  .btn-login{background:#1a4b27;color:#fff;width:100%}
  .small{font-size:13px;color:#666;text-align:center;margin-top:8px;line-height:1.4}
  .back{position:fixed;left:16px;bottom:18px;background:#1a4b27;color:#fff;padding:10px 14px;border-radius:10px;border:none;cursor:pointer}
</style>
</head>
<body>

<div class="wrap">
  <div class="card">
    <h1>Iniciar sesión</h1>

    <input id="user" placeholder="Usuario" />
    <input id="pass" placeholder="Contraseña" type="password"/>

    <button class="btn btn-login" id="loginBtn">Entrar</button>

    <div class="small">
      Admin: <b>admin / 1234</b><br>
      Conductor: <b>conductor / Brasil643</b><br>
      Invitado: escribir solo <b>invitado</b>
    </div>
  </div>
</div>

<button class="back" onclick="location.href='index.html'">⬅ Volver</button>

<script>
document.getElementById('loginBtn').addEventListener('click', ()=>{

  const user = document.getElementById('user').value.trim();
  const pass = document.getElementById('pass').value.trim();

  if(!user){
    alert('Ingrese usuario');
    return;
  }

  // ADMIN
  if(user === 'admin' && pass === '1234'){
    guardarSesion('admin', user);
    location.href="index.html";
    return;
  }

  // CONDUCTOR
  if(user === 'conductor' && pass === 'Brasil643'){
    guardarSesion('conductor', user);
    location.href="index.html";
    return;
  }

  // INVITADO
  if(user === 'invitado'){
    guardarSesion('invitado', 'Invitado');
    location.href="index.html";
    return;
  }

  alert('Usuario o contraseña incorrectos');
});

function guardarSesion(rol, nombre){
  const sesion = {
    rol,
    nombre,
    fecha: Date.now()
  };

  // ✅ ESTO ES LO QUE FALTABA
  localStorage.setItem("rol", rol);
  localStorage.setItem("sesion", JSON.stringify(sesion));
}
</script>

</body>
</html>