<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tablero</title>

<style>
  body { margin:0; font-family:Arial; background:#f4f4f4; color:#333; }

  header {
    background:#1a4b27;
    color:#fff;
    padding:16px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
  }

  .top-buttons {
    display:flex;
    justify-content:space-between;
    padding:10px;
    background:#e8e8e8;
    gap:6px;
    flex-wrap:wrap;
  }

  .btn {
    background:#1a4b27;
    color:white;
    padding:8px 12px;
    border-radius:7px;
    text-decoration:none;
    font-size:14px;
    cursor:pointer;
    border:none;
  }
  .btn:hover { opacity:0.9; }

  .container { padding:16px; }

  .item {
    background:white;
    padding:12px;
    border-radius:10px;
    margin-bottom:10px;
    box-shadow:0 2px 4px rgba(0,0,0,0.1);
    font-size:14px;
  }
</style>

<script type="module">
/* =============================
      FIREBASE
============================= */
import { db, ref as dbRef, push, onValue } from "./firebase.js";

const pendientesRef = dbRef(db,"pendientes");

/* =============================
      LISTAR
============================= */
const lista = document.getElementById("lista");

onValue(pendientesRef, snap => {
    lista.innerHTML = "";
    snap.forEach(child => {
        const d = child.val();
        const div = document.createElement("div");
        div.className = "item";

        div.innerHTML = `
            <b>${d.titulo || "Sin tÃ­tulo"}</b><br>
            ${d.descripcion || ""}<br><br>
            ${d.archivoURL ? `<a href="${d.archivoURL}" target="_blank">ðŸ“Ž Ver archivo</a>` : ""}
        `;

        lista.appendChild(div);
    });
});

/* =============================
      AGREGAR PENDIENTE
============================= */
window.agregarPendiente = function () {
    const titulo = prompt("TÃ­tulo del pendiente:");
    if (!titulo) return;

    const descripcion = prompt("DescripciÃ³n:");

    push(pendientesRef, {
        titulo,
        descripcion,
        fecha: new Date().toISOString()
    });
};

/* =============================
      AGREGAR ARCHIVO (LINK)
============================= */
window.agregarArchivo = function () {
    const titulo = prompt("TÃ­tulo:");
    if (!titulo) return;

    const descripcion = prompt("DescripciÃ³n:");
    const link = prompt("PegÃ¡ el link del archivo (Drive, imagen, PDF, etc):");

    push(pendientesRef, {
        titulo,
        descripcion,
        archivoURL: link,
        fecha: new Date().toISOString()
    });
};
</script>

</head>

<body>

<header>Tablero</header>

<div class="top-buttons">
  <a href="index.html" class="btn">â¬… Volver</a>
  <button class="btn" onclick="agregarPendiente()">+ Pendiente</button>
  <button class="btn" onclick="agregarArchivo()">ðŸ“Ž Archivo (link)</button>
</div>

<div class="container">
  <h3>Pendientes</h3>
  <div id="lista"></div>
</div>

</body>
</html>
