<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sugerencias</title>
<style>
  :root{--verde:#1a4b27;--bg:#f4f4f4}
  body{margin:0;font-family:Arial;background:var(--bg);color:#222}
  header{background:var(--verde);color:#fff;padding:18px;text-align:center;font-size:20px;font-weight:700}
  .container{padding:18px;max-width:980px;margin:0 auto}
  textarea{width:100%;padding:12px;border-radius:8px;border:1px solid #ccc;min-height:120px}
  .btn{padding:10px 14px;border-radius:8px;border:none;background:var(--verde);color:#fff;font-weight:700;cursor:pointer;margin-top:10px}
  .back-btn{position:fixed;left:16px;bottom:18px;background:var(--verde);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
</style>
</head>
<body>
<header>Sugerencias</header>
<div class="container">
  <textarea id="sugText" placeholder="Escriba su sugerencia..."></textarea>
  <button id="sendSug" class="btn">Enviar sugerencia</button>
  <div id="msg" style="margin-top:12px;color:#666"></div>
</div>
<button class="back-btn" onclick="location.href='index.html'">⬅ Volver</button>

<script type="module">
import { db, ref, push, set } from "./firebase.js";
const txt = document.getElementById('sugText');
const btn = document.getElementById('sendSug');
const msg = document.getElementById('msg');

btn.addEventListener('click', async ()=>{
  const v = txt.value.trim();
  if(!v){ msg.textContent = 'Escriba una sugerencia.'; return; }
  try{
    const p = push(ref(db, 'sugerencias'));
    await set(p, { text: v, ts: Date.now() });
    txt.value = '';
    msg.textContent = 'Sugerencia enviada. Gracias.';
  }catch(e){
    console.error(e); msg.textContent = 'Error enviando. Mirá consola.';
  }
});
</script>
</body>
</html>