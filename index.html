<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Departamento de Territorio</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #e8f5e9;
        margin: 0;
        padding: 0;
    }

    /* Pantallas */
    .pantalla {
        display: none;
        padding: 20px;
    }

    .visible {
        display: block;
    }

    /* Tarjetas men√∫ */
    .menu {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 20px;
        margin-top: 40px;
    }

    .tarjeta {
        background: white;
        padding: 25px;
        text-align: center;
        border-radius: 18px;
        box-shadow: 0 4px 14px rgba(0,0,0,0.12);
        font-size: 22px;
        color: #2e7d32;
        font-weight: bold;
        cursor: pointer;
    }

    .tarjeta:hover { background: #f1f8f4; }

    h2 {
        color: #2e7d32;
        margin-top: 0;
        text-align: center;
    }

    label {
        font-size: 15px;
        color: #333;
        font-weight: bold;
    }

    input, textarea {
        width: 100%;
        padding: 12px;
        margin: 8px 0 16px 0;
        border-radius: 10px;
        border: 1px solid #bdbdbd;
        font-size: 16px;
    }

    button {
        width: 100%;
        padding: 15px;
        background: #43a047;
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
    }

    button:hover { background: #2e7d32; }

    .volver {
        margin-top: 20px;
        background: #757575;
    }
</style>

</head>
<body>

<!-- PANTALLA PRINCIPAL -->
<div id="inicio" class="pantalla visible">
    <h2>Departamento de Territorio üìç</h2>

    <div class="menu">
        <div class="tarjeta" onclick="abrir('reportar')">Reportar Predicaci√≥n</div>
        <div class="tarjeta" onclick="abrir('anuncios')">Tablero de Anuncios</div>
        <div class="tarjeta" onclick="abrir('reportes')">Reportes</div>
        <div class="tarjeta" onclick="abrir('mapa')">Mapa</div>
    </div>
</div>

<!-- PANTALLA REPORTAR -->
<div id="reportar" class="pantalla">
    <h2>üìã Reportar Predicaci√≥n</h2>

    <label>Fecha:</label>
    <input id="fecha" type="date">

    <label>Qui√©n predic√≥:</label>
    <input id="predicador" type="text" placeholder="Nombre">

    <label>Territorio:</label>
    <input id="territorio" type="number" placeholder="N√∫mero">

    <label>Manzana:</label>
    <input id="manzana" type="number" placeholder="N√∫mero">

    <button onclick="enviarReporte()">Enviar Reporte v√≠a WhatsApp</button>

    <button class="volver" onclick="volver()">Volver</button>
</div>

<!-- PANTALLA ANUNCIOS -->
<div id="anuncios" class="pantalla">
    <h2>üì¢ Tablero de Anuncios</h2>
    <p>Aqu√≠ podr√°s agregar avisos en una pr√≥xima versi√≥n.</p>

    <button class="volver" onclick="volver()">Volver</button>
</div>

<!-- PANTALLA REPORTES GUARDADOS -->
<div id="reportes" class="pantalla">
    <h2>üìí Reportes Enviados</h2>
    <div id="listaReportes"></div>

    <button class="volver" onclick="volver()">Volver</button>
</div>

<!-- PANTALLA MAPA -->
<div id="mapa" class="pantalla">
    <h2>üó∫Ô∏è Mapa Completo del Territorio</h2>

    <p>Subiremos tu PDF o imagen aqu√≠ cuando me lo pases.</p>

    <button class="volver" onclick="volver()">Volver</button>
</div>

<script>
function abrir(id) {
    document.querySelectorAll('.pantalla').forEach(p => p.classList.remove('visible'));
    document.getElementById(id).classList.add('visible');
}

function volver() {
    abrir('inicio');
}

function enviarReporte() {
    const fecha = document.getElementById("fecha").value;
    const predicador = document.getElementById("predicador").value;
    const territorio = document.getElementById("territorio").value;
    const manzana = document.getElementById("manzana").value;

    if (!fecha || !predicador || !territorio || !manzana) {
        alert("Por favor completa todos los campos.");
        return;
    }

    // Guardar en el dispositivo
    let datos = JSON.parse(localStorage.getItem("reportes") || "[]");
    datos.push({ fecha, predicador, territorio, manzana });
    localStorage.setItem("reportes", JSON.stringify(datos));
    mostrarReportes();

    // WhatsApp
    const telefono = "5493416715020";
    const mensaje =
`üì£ *Nuevo Reporte de Predicaci√≥n*
üóì Fecha: ${fecha}
üë§ Publicador: ${predicador}
üåç Territorio: ${territorio}
‚¨õ Manzana: ${manzana}`;

    const url = "https://api.whatsapp.com/send?phone=" + telefono + "&text=" + encodeURIComponent(mensaje);
    window.open(url, "_blank");

    alert("Reporte enviado correctamente.");
}

function mostrarReportes() {
    const cont = document.getElementById("listaReportes");
    let datos = JSON.parse(localStorage.getItem("reportes") || "[]");

    cont.innerHTML = datos.map(r => `
        <div style="
            background:white;
            padding:15px;
            border-radius:12px;
            margin-bottom:12px;
            box-shadow:0 3px 10px rgba(0,0,0,0.12);
        ">
            <b>${r.fecha}</b><br>
            üë§ ${r.predicador}<br>
            üåç Territorio ${r.territorio}<br>
            ‚¨õ Manzana ${r.manzana}
        </div>
    `).join("");
}

mostrarReportes();
</script>

</body>
</html>
