<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Departamento de Territorio - Cuatro Plazas</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f4f4f4;
        color: #333;
    }

    header {
        background: #1a4b27;
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: white;
        font-size: 22px;
        font-weight: bold;
    }

    .login-btn {
        background: white;
        color: #1a4b27;
        border: none;
        padding: 10px 18px;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        font-weight: bold;
    }

    .login-btn.logout {
        background: #d62828;
        color: white;
    }

    .login-btn:hover { background: #e8e8e8 }

    .container { padding: 20px }

    .grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }

    .btn-card {
        background: white;
        border-radius: 15px;
        padding: 25px 10px;
        text-align: center;
        font-size: 18px;
        font-weight: bold;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        cursor: pointer;
        transition: 0.2s;
    }

    .btn-card:hover { transform: scale(1.05) }

    .emoji {
        font-size: 45px;
        display: block;
        margin-bottom: 8px;
    }
</style>
</head>

<body>

<header>
    Departamento de Territorio
    <button class="login-btn" id="btnLogin" onclick="irLogin()">Iniciar sesi√≥n</button>
</header>

<div class="container">
    <div class="grid">

        <div class="btn-card" id="btnTablero" onclick="location.href='tablero.html'">
            <span class="emoji">üì¢</span> Tablero de anuncios
        </div>

        <div class="btn-card" id="btnInformar" onclick="location.href='informar.html'">
            <span class="emoji">üìù</span> Informar territorio
        </div>

        <div class="btn-card" id="btnProximas" onclick="location.href='proximas.html'">
            <span class="emoji">üìÖ</span> Pr√≥ximas salidas
        </div>

        <div class="btn-card" id="btnMapa" onclick="location.href='mapa.html'">
            <span class="emoji">üó∫Ô∏è</span> Mapa interactivo
        </div>

        <div class="btn-card" id="btnSug" onclick="location.href='sugerencia.html'">
            <span class="emoji">üí°</span> Sugerencias
        </div>

        <div class="btn-card" id="btnReportes" onclick="location.href='reportes.html'">
            <span class="emoji">üìä</span> Reportes
        </div>

    </div>
</div>

<script>
const sesion = JSON.parse(localStorage.getItem("sesion") || "null");
const rol = sesion?.rol || "invitado";
const btnLogin = document.getElementById("btnLogin");

// CAMBIAR BOT√ìN
if(sesion){
  btnLogin.textContent = "Salir ("+sesion.nombre+")";
  btnLogin.classList.add("logout");
}else{
  btnLogin.textContent = "Iniciar sesi√≥n";
}

// PERMISOS POR ROL
const permisos = {
  invitado: ["btnProximas","btnTablero","btnMapa","btnSug"],
  conductor: ["btnProximas","btnTablero","btnMapa","btnSug","btnInformar","btnReportes"],
  admin: ["btnProximas","btnTablero","btnMapa","btnSug","btnInformar","btnReportes"]
};

// OCULTAR TODO
["btnProximas","btnTablero","btnMapa","btnSug","btnInformar","btnReportes"].forEach(id=>{
  document.getElementById(id).style.display="none";
});

// MOSTRAR PERMITIDOS
(permisos[rol]||[]).forEach(id=>{
  document.getElementById(id).style.display="block";
});

// REDIRECCI√ìN ESPECIAL ADMIN
document.getElementById("btnProximas").onclick = ()=>{
  if(rol === "admin"){
    location.href = "proximas.html"; // luego ser√° pendientes_admin
  }else{
    location.href = "proximas.html";
  }
};

// LOGIN / LOGOUT
function irLogin(){
  if(sesion){
    localStorage.removeItem("sesion");
    location.reload();
  }else{
    location.href="login.html";
  }
}
</script>

</body>
</html>