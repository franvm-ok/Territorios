<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Territorios - Dashboard</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #eef6ee;
    }

    header {
        background: #2d6a4f;
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 28px;
        font-weight: bold;
    }

    .container {
        padding: 20px;
    }

    /* TARJETAS GRANDES */
    .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
    }

    .card {
        background: #40916c;
        color: white;
        padding: 30px;
        text-align: center;
        border-radius: 18px;
        font-size: 22px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .card:hover {
        background: #2d6a4f;
        transform: scale(1.03);
    }

    /* PANTALLAS */
    .hidden {
        display: none;
    }

    label {
        display: block;
        font-size: 20px;
        margin-top: 15px;
        font-weight: bold;
    }

    select, input {
        width: 100%;
        padding: 15px;
        font-size: 20px;
        margin-top: 5px;
        border-radius: 10px;
        border: 1px solid #aaa;
    }

    button {
        width: 100%;
        padding: 20px;
        font-size: 22px;
        margin-top: 25px;
        background: #2d6a4f;
        color: white;
        border: none;
        border-radius: 12px;
        cursor: pointer;
    }

    button:hover {
        background: #22543d;
    }

    .back-btn {
        background: #555;
    }

    table {
        width: 100%;
        margin-top: 20px;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        border-collapse: collapse;
    }

    th, td {
        padding: 15px;
        font-size: 18px;
        border-bottom: 1px solid #ddd;
    }

    th {
        background: #2d6a4f;
        color: white;
    }
</style>
</head>

<body>

<header>Departamento de Territorio</header>

<div class="container">

    <!-- PANTALLA PRINCIPAL - DASHBOARD -->
    <div id="menu-principal">
        <div class="cards">

            <div class="card" onclick="abrirReportar()">üìã Reportar Predicaci√≥n</div>

            <div class="card" onclick="abrirTerritorios()">üóÇÔ∏è Territorios</div>

            <div class="card" onclick="alert('Mapa pr√≥ximamente')">üó∫Ô∏è Mapa</div>

            <div class="card" onclick="abrirReportes()">üìë Ver Reportes</div>

        </div>
    </div>

    <!-- REPORTAR PREDICACI√ìN -->
    <div id="pantalla-reportar" class="hidden">

        <h2>üìã Reportar Predicaci√≥n</h2>

        <label>Territorio</label>
        <select id="territorio" onchange="cargarManzanas()">
            <option value="">Seleccionar...</option>
        </select>

        <label>Manzana</label>
        <select id="manzana">
            <option value="">Seleccionar...</option>
        </select>

        <label>Predicador</label>
        <input type="text" id="predicador" placeholder="Nombre del conductor">

        <label>Fecha</label>
        <input type="date" id="fecha">

        <button onclick="guardarReporte()">Guardar Reporte</button>
        <button class="back-btn" onclick="volver()">Volver al Men√∫</button>
    </div>

    <!-- LISTADO DE REPORTES -->
    <div id="pantalla-reportes" class="hidden">
        <h2>üìë Reportes Realizados</h2>

        <table>
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Territorio</th>
                    <th>Manzana</th>
                    <th>Predicador</th>
                </tr>
            </thead>
            <tbody id="tabla-reportes"></tbody>
        </table>

        <button class="back-btn" onclick="volver()">Volver al Men√∫</button>
    </div>

    <!-- PANTALLA TERRITORIOS (solo placeholder por ahora) -->
    <div id="pantalla-territorios" class="hidden">
        <h2>üóÇÔ∏è Territorios</h2>
        <p>(Ac√° despu√©s ponemos el mapa de tus 32 tarjetas con manzanas)</p>

        <button class="back-btn" onclick="volver()">Volver al Men√∫</button>
    </div>

</div>


<script>
// =========================
// DATA: CANTIDADES DE MANZANAS POR TERRITORIO
// =========================
const territorios = {
    1: 4, 2: 4, 3: 4, 4: 5, 5: 8, 6: 6, 7: 6, 8: 6,
    9: 8, 10: 6, 11: 8, 12: 7, 13: 4, 14: 8, 15: 6, 16: 6,
    17: 4, 18: 6, 19: 4, 20: 4, 21: 5, 22: 4, 23: 4, 24: 4,
    25: 4, 26: 4, 27: 4, 28: 6, 29: 4, 30: 4, 31: 5, 32: 6
};

// carga los territorios en el select
const territorioSelect = document.getElementById("territorio");
Object.keys(territorios).forEach(num => {
    let op = document.createElement("option");
    op.value = num;
    op.textContent = "Territorio " + num;
    territorioSelect.appendChild(op);
});

// =========================
// NAVEGACI√ìN
// =========================
function abrirReportar() {
    mostrar("pantalla-reportar");
}

function abrirReportes() {
    mostrar("pantalla-reportes");
    cargarTabla();
}

function abrirTerritorios() {
    mostrar("pantalla-territorios");
}

function volver() {
    mostrar("menu-principal");
}

function mostrar(id) {
    document.getElementById("menu-principal").classList.add("hidden");
    document.getElementById("pantalla-reportar").classList.add("hidden");
    document.getElementById("pantalla-reportes").classList.add("hidden");
    document.getElementById("pantalla-territorios").classList.add("hidden");

    document.getElementById(id).classList.remove("hidden");
}

// =========================
// SELECT MANZANAS
// =========================
function cargarManzanas() {
    let territorio = document.getElementById("territorio").value;
    let manzanaSelect = document.getElementById("manzana");
    manzanaSelect.innerHTML = `<option value="">Seleccionar...</option>`;

    if (!territorio) return;

    let cantidad = territorios[territorio];
    for (let i = 1; i <= cantidad; i++) {
        let op = document.createElement("option");
        op.value = i;
        op.textContent = "Manzana " + i;
        manzanaSelect.appendChild(op);
    }
}

// =========================
// GUARDAR REPORTE
// =========================
function guardarReporte() {
    let territorio = document.getElementById("territorio").value;
    let manzana = document.getElementById("manzana").value;
    let predicador = document.getElementById("predicador").value;
    let fecha = document.getElementById("fecha").value;

    if (!territorio || !manzana || !predicador || !fecha) {
        alert("Complete todos los campos.");
        return;
    }

    let registro = { territorio, manzana, predicador, fecha };

    let lista = JSON.parse(localStorage.getItem("reportes")) || [];
    lista.push(registro);
    localStorage.setItem("reportes", JSON.stringify(lista));

    alert("Reporte guardado correctamente.");
}

// =========================
// CARGAR TABLA
// =========================
function cargarTabla() {
    let lista = JSON.parse(localStorage.getItem("reportes")) || [];
    let tabla = document.getElementById("tabla-reportes");
    tabla.innerHTML = "";

    lista.forEach(r => {
        let fila = document.createElement("tr");
        fila.innerHTML = `
            <td>${r.fecha}</td>
            <td>${r.territorio}</td>
            <td>${r.manzana}</td>
            <td>${r.predicador}</td>
        `;
        tabla.appendChild(fila);
    });
}
</script>

</body>
</html>
