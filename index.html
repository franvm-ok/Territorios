<!DOCTYPE html>
<html lang="es">
<head>
ย <meta charset="utf-8" />
ย <meta name="viewport" content="width=device-width,initial-scale=1" />
ย <title>Departamento de Territorio</title>
ย <meta name="description" content="App Territorios - reportes y sincronizaciรณn en tiempo real" />
ย ย <script src="https://cdn.tailwindcss.com"></script>
ย ย <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
ย <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

ย <style>
ย ย /* ---- Visual / Theme (iOS-like, Lindo e Intuitivo) ---- */
ย ย :root{
ย ย ย /* Paleta de colores suaves y acentos vibrantes */
ย ย ย --accent-primary: #ff8b73; /* Coral suave vibrante (antes green-500) */
ย ย ย --accent-light: #ffb58d; /* Naranja/Coral mรกs claro (antes green-400) */
ย ย ย --bg: linear-gradient(135deg, #f8f0ff, #e6f7ff); /* Degradado pastel para fondo */
ย ย ย --card: #ffffff; /* Blanco limpio para tarjetas */
ย ย ย --text-color: #2c3e50; /* Azul oscuro para texto principal */
ย ย ย --muted-color: #7f8c8d; /* Gris suave para texto secundario */
ย ย ย --border-color: #e6eef0; /* Borde muy sutil */
ย ย }
ย ย 
ย ย html,body{height:100%;}
ย ย body{
ย ย ย /* Fuente de sistema para look iOS */
ย ย ย font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
ย ย ย background:var(--bg); /* Fondo degradado */
ย ย ย color:var(--text-color);
ย ย ย margin:0;
ย ย ย -webkit-font-smoothing:antialiased;
ย ย ย -moz-osx-font-smoothing:grayscale;
ย ย }

ย ย /* Layout containers */
ย ย .app-shell{min-height:100vh; display:flex; flex-direction:column;}
ย ย .main-row{display:flex; flex:1; min-height:0;}

ย ย /* Sidebar (PC) */
ย ย .pc-sidebar{display:none;}
ย ย @media(min-width:1024px){
ย ย ย .pc-sidebar{display:flex; width:88px; background:var(--card); border-right:1px solid var(--border-color); flex-direction:column; align-items:center; padding-top:1.25rem; gap:0.75rem; position:fixed; left:0; top:0; bottom:0; z-index:40;}
ย ย ย .content-area{margin-left:88px; flex:1;}
ย ย }

ย ย /* Header */
ย ย header.app-header{background:rgba(255,255,255,0.95); backdrop-filter: blur(8px); border-bottom:1px solid var(--border-color); padding:14px; display:flex; align-items:center; justify-content:space-between; gap:12px; position:sticky; top:0; z-index:30;}
ย ย .brand{ text-align:center; }
ย ย .brand .title{ color:var(--accent-primary); font-weight:700; font-size:1.05rem; }
ย ย .brand .subtitle{ font-size:0.85rem; color:var(--muted-color); }

ย ย /* Search */
ย ย .search-box{display:flex; align-items:center; gap:8px; background:#f7f9fc; padding:8px 12px; border-radius:999px; border:1px solid #e6eef0; width:220px;}
ย ย .search-box input{background:transparent; border:0; outline:none; width:100%; font-size:0.95rem;}

ย ย /* Dashboard grid / cards */
ย ย .dashboard{padding:16px; display:grid; grid-template-columns:repeat(2, 1fr); gap:14px;}
ย ย @media(min-width:768px){ .dashboard{ grid-template-columns:repeat(3,1fr); } }
ย ย @media(min-width:1200px){ .dashboard{ grid-template-columns:repeat(4,1fr); } }
ย ย .card{ 
ย ย ย background:var(--card); 
ย ย ย padding:18px; 
ย ย ย border-radius:18px; /* Mรกs redondeado */
ย ย ย box-shadow:0 10px 30px rgba(0, 0, 0, 0.08); /* Sombra sutil iOS */
ย ย ย display:flex; flex-direction:column; justify-content:space-between; min-height:140px; cursor:pointer; transition:transform .14s ease, box-shadow .14s ease;
ย ย }
ย ย .card:active{ transform:scale(.98); } /* Mรกs reacciรณn al click */
ย ย .card .icon-wrap{ width:48px; height:48px; border-radius:14px; /* Mรกs redondeado */ display:flex; align-items:center; justify-content:center; margin-bottom:8px;}
ย ย .card .h{ font-weight:600; font-size:1.05rem; }

ย ย /* FAB center bottom in mobile */
ย ย .mobile-bottom{ display:flex; gap:8px; align-items:center; justify-content:space-around; position:fixed; left:0; right:0; bottom:0; padding:10px 14px; background:var(--card); border-top:1px solid var(--border-color); z-index:50; }
ย ย .nav-btn{ display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px; font-size:12px; color:var(--muted-color);}
ย ย .fab-center{ 
ย ย ย width:64px; height:64px; border-radius:999px; 
ย ย ย display:flex; align-items:center; justify-content:center; 
ย ย ย background:linear-gradient(135deg,var(--accent-light),var(--accent-primary)); /* Degradado coral */
ย ย ย color:white; font-weight:700; font-size:22px; 
ย ย ย box-shadow:0 12px 30px rgba(255, 139, 115, 0.35); /* Sombra mรกs fuerte y cรกlida */
ย ย ย transform:translateY(-18px); transition:transform .12s; 
ย ย }
ย ย .fab-center:active{ transform:translateY(-16px) scale(.98); }

ย ย /* Screens for SPA-like */
ย ย .screen{ padding:16px; display:block; animation:fadeIn .2s ease; min-height:calc(100vh - 120px); }
ย ย .hidden{ display:none !important; }
ย ย @keyframes fadeIn{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }

ย ย /* Manzanas grid */
ย ย .manzanas-grid{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
ย ย .manzana{ padding:8px 14px; background:#f7f9fc; border-radius:12px; /* Redondeado y limpio */ cursor:pointer; border:1px solid transparent; transition:all .12s; }
ย ย .manzana.selected{ 
ย ย ย background:linear-gradient(90deg,var(--accent-light),var(--accent-primary)); /* Degradado seleccionado */
ย ย ย color:white; transform:translateY(-2px); 
ย ย ย box-shadow:0 6px 14px rgba(255, 139, 115, 0.2); 
ย ย }

ย ย /* Form */
ย ย .form-card{ background:var(--card); padding:18px; border-radius:20px; /* Muy redondeado */ box-shadow:0 10px 30px rgba(0, 0, 0, 0.08); margin-top:12px; }
ย ย input[type="text"], textarea{ 
ย ย ย width:100%; padding:12px 14px; border-radius:12px; 
ย ย ย border:1px solid var(--border-color); outline:none; 
ย ย ย font-size:14px; margin-top:8px; background:#f7f9fc; /* Fondo sutil en input */
ย ย }
ย ย textarea{ min-height:84px; resize:vertical; }

ย ย /* Small utility */
ย ย .muted{ color:var(--muted-color); font-size:13px; }
ย ย .btn{ padding:10px 14px; border-radius:14px; border:0; cursor:pointer; font-weight:600; }
ย ย .btn-teal{ 
ย ย ย background:linear-gradient(90deg,var(--accent-light),var(--accent-primary)); 
ย ย ย color:white; 
ย ย ย box-shadow:0 8px 20px rgba(255, 139, 115, 0.3); 
ย ย }
ย ย .btn-ghost{ background:transparent; border:1px solid var(--border-color); color:var(--text-color); }

ย ย /* Toast */
ย ย .toast{ position:fixed; right:18px; bottom:86px; background:var(--text-color); color:white; padding:10px 14px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.3); display:none; z-index:60; }

ย ย /* Dark mode (ajustado a la nueva paleta) */
ย ย body.dark{ 
ย ย ย background: #1a202c; /* Fondo oscuro simple */
ย ย ย color:#e6eef5; 
ย ย }
ย ย body.dark .card, body.dark .form-card, body.dark .pc-sidebar, body.dark .mobile-bottom, body.dark header.app-header{ 
ย ย ย background:#2d3748; 
ย ย ย border-color:#4a5568; 
ย ย }
ย ย body.dark .muted{ color:#a0aec0; }
ย ย body.dark input, body.dark textarea { background:#1a202c; color:#e6eef5; border-color:#4a5568; }
ย ย body.dark .search-box{ background:#1a202c; border-color:#4a5568; }
ย ย body.dark .manzana{ background:#4a5568; color:#e6eef5; border-color:#4a5568; }
ย ย body.dark .manzana.selected{ 
ย ย ย background:linear-gradient(90deg,var(--accent-light),var(--accent-primary)); 
ย ย ย color:white; 
ย ย }

    /* Estilo de la tarjeta de reporte en la lista */
    #reportsList > div {
        background: var(--card) !important;
        border-radius: 18px !important; 
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.04) !important;
    }
ย </style>
</head>
<body>

ย <div class="app-shell">

ย ย ย ย <header class="app-header">
ย ย ย <div style="width:88px"></div> ย ย ย <div class="brand">
ย ย ย ย <div class="title">Departamento de Territorio</div>
ย ย ย ย <div class="subtitle">Congregaciรณn Cuatro Plazas</div>
ย ย ย </div>
        ย ย ย <div style="display:flex; align-items:center; gap:12px;">
ย ย ย ย <div class="search-box hidden sm:flex">
ย ย ย ย ย <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
ย ย ย ย ย <input id="searchInput" placeholder="Buscar reportes..." />
ย ย ย ย </div>
ย ย ย ย <button id="loginBtn" class="btn btn-ghost hidden sm:inline">Iniciar sesiรณn</button>
ย ย ย ย <div style="position:relative;">
ย ย ย ย ย <button id="settingsBtn" class="btn btn-ghost" title="Ajustes">โ๏ธ</button>
ย ย ย ย ย <div id="settingsMenu" style="display:none; position:absolute; right:0; top:44px; background:var(--card); border-radius:10px; box-shadow:0 8px 30px rgba(2,6,23,0.06); padding:10px; min-width:200px;">
ย ย ย ย ย ย <label style="display:flex; justify-content:space-between; align-items:center; gap:8px;">
ย ย ย ย ย ย ย <span>Modo oscuro</span>
ย ย ย ย ย ย ย <input id="darkToggle" type="checkbox" />
ย ย ย ย ย ย </label>
ย ย ย ย ย ย <div style="font-size:12px; color:#64748b; margin-top:8px;">Opciones</div>
ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย </div>
ย ย </header>

ย ย <div class="main-row">

ย ย ย ย ย ย <aside class="pc-sidebar">
ย ย ย ย ย ย ย ย <button class="nav pc-nav" data-nav="home" title="Inicio" style="background:transparent; border:none; padding:6px; width:56px;">
ย ย ย ย ย <div style="font-size:20px; color:var(--accent-primary)">๐</div>
ย ย ย ย ย <div style="font-size:11px; color:var(--muted-color); margin-top:6px;">Inicio</div>
ย ย ย ย </button>
ย ย ย ย ย ย ย ย <button class="nav pc-nav" data-nav="reports" title="Reportes" style="background:transparent; border:none; padding:6px; width:56px;">
ย ย ย ย ย <div style="font-size:20px; color:var(--muted-color)">๐ฐ</div>
ย ย ย ย ย <div style="font-size:11px; color:var(--muted-color); margin-top:6px;">Noticias</div>
ย ย ย ย </button>

ย ย ย ย <button id="pcFab" title="Acciรณn" style="margin-top:6px; width:56px; height:56px; border-radius:16px; /* Ajuste mรกs cuadrado-redondeado */ background:linear-gradient(135deg,var(--accent-light),var(--accent-primary)); color:white; display:flex; align-items:center; justify-content:center; font-weight:700; border:none;">+</button>

ย ย ย ย <button class="nav pc-nav" data-nav="help" title="Ayuda" style="background:transparent; border:none; padding:6px; width:56px;">
ย ย ย ย ย <div style="font-size:20px; color:var(--muted-color)">โ</div>
ย ย ย ย ย <div style="font-size:11px; color:var(--muted-color); margin-top:6px;">Ayuda</div>
ย ย ย ย </button>

ย ย ย ย <button class="nav pc-nav" data-nav="profile" title="Perfil" style="background:transparent; border:none; padding:6px; width:56px;">
ย ย ย ย ย <div style="font-size:20px; color:var(--muted-color)">๐ค</div>
ย ย ย ย ย <div style="font-size:11px; color:var(--muted-color); margin-top:6px;">Perfil</div>
ย ย ย ย </button>
ย ย ย </aside>

ย ย ย ย ย ย <div class="content-area" style="flex:1;">

ย ย ย ย ย ย ย ย <main id="homeScreen" class="screen">
ย ย ย ย ย ย ย ย ย </main>

ย ย ย ย ย ย ย ย <section id="newScreen" class="screen hidden">
ย ย ย ย ย ย ย ย ย </section>

ย ย ย ย ย ย ย ย <section id="reportsScreen" class="screen hidden">
ย ย ย ย ย ย ย ย ย </section>

ย ย ย ย ย ย ย ย <section id="helpScreen" class="screen hidden">
ย ย ย ย ย <h2 style="font-weight:700;">Ayuda</h2>
ย ย ย ย ย <p class="muted">Informaciรณn y contactos.</p>
ย ย ย ย </section>

ย ย ย ย <section id="profileScreen" class="screen hidden">
ย ย ย ย ย <h2 style="font-weight:700;">Perfil</h2>
ย ย ย ย ย <p class="muted">Datos del usuario.</p>
ย ย ย ย </section>

ย ย ย </div>
ย ย </div>

ย ย ย ย <nav class="mobile-bottom hidden lg:hidden mobile-bottom" style="display:flex;">
ย ย ย ย ย ย <button class="nav-btn" data-mobile="home"><div style="font-size:20px">๐</div><div>Inicio</div></button>
ย ย ย <button class="nav-btn" data-mobile="reports"><div style="font-size:20px">๐ฐ</div><div>Noticias</div></button>
ย ย ย <button id="fabMobile" class="fab-center">+</button>
ย ย ย <button class="nav-btn" data-mobile="help"><div style="font-size:20px">โ</div><div>Ayuda</div></button>
ย ย ย <button class="nav-btn" data-mobile="profile"><div style="font-size:20px">๐ค</div><div>Perfil</div></button>
ย ย </nav>

ย ย <div id="toast" class="toast"></div>

ย </div>
    
<script>
// ... Tu cรณdigo JavaScript (no modificado) ...
// Asegรบrate de que los estilos inline en JS se actualicen si es necesario,
// como en la funciรณn renderReportsList (lo actualicรฉ arriba en el CSS global).

/*******************************
 * RENDER: Cards Grid (modificado para usar nuevos colores)
 *******************************/
const cardsGrid = document.getElementById('cardsGrid');
function renderCards(){
ย ย cardsGrid.innerHTML = '';
ย ย Object.keys(territoryMap).forEach(k=>{
ย ย ย const n = Number(k);
ย ย ย const card = document.createElement('div');
ย ย ย card.className = 'card';
ย ย ย 
ย ย ย // Uso de las nuevas variables de color para los iconos de las tarjetas
ย ย ย if(n===1) card.innerHTML = `<div class="icon-wrap" style="background:linear-gradient(135deg,var(--accent-light),var(--accent-primary)); color:white; font-size:22px;">๐</div><div class="h">Mapa Interactivo</div>`;
ย ย ย else card.innerHTML = `<div class="icon-wrap" style="background:#f7f9fc; color:var(--accent-primary); font-size:22px;">${n}</div><div class="h">Territorio ${n}</div><div class="muted" style="margin-top:6px;">${territoryMap[n]} manzanas</div>`;
ย ย ย 
ย ย ย card.addEventListener('click', ()=>{
ย ย ย ย openNewScreenForTerritory(n);
ย ย ย });
ย ย ย cardsGrid.appendChild(card);
ย ย });

ย ย // Tarjetas especiales
ย ย const specials = [
ย ย ย {title:'Mapa Interactivo', icon:'๐บ๏ธ', action:()=> openNewScreenForTerritory(1)},
ย ย ย {title:'Nuevo Reporte', icon:'โ๏ธ', action:()=> { showToast('Elegรญ un territorio en Inicio'); }},
ย ย ย {title:'Tablero de Anuncios', icon:'๐ฃ', action:()=> navigateTo('reportsScreen')},
ย ย ย {title:'Reportes', icon:'๐', action:()=> navigateTo('reportsScreen')},
ย ย ย {title:'Sugerencia prรณximas salidas', icon:'๐', action:()=> navigateTo('reportsScreen')}
ย ย ];
ย ย for(let i=specials.length-1;i>=0;i--){
ย ย ย const s = specials[i];
ย ย ย const el = document.createElement('div');
ย ย ย el.className = 'card';
ย ย ย // Uso de los nuevos colores para el envoltorio del icono
ย ย ย el.innerHTML = `<div class="icon-wrap" style="background:#f7f9fc; color:var(--accent-primary);">${s.icon}</div><div class="h">${s.title}</div>`;
ย ย ย el.addEventListener('click', s.action);
ย ย ย cardsGrid.insertBefore(el, cardsGrid.firstChild);
ย ย }
ย }

// ... El resto de tus funciones JS (navigateTo, saveAndSend, etc.) ...
// La funciรณn renderReportsList en tu JS tiene estilos inline; si quieres que se vean bien, asegรบrate de que el CSS al principio del archivo maneje el estilo de #reportsList > div. (Lo agreguรฉ al final de la secciรณn <style>).

// ... Tu cรณdigo JavaScript continรบa aquรญ ...
/*******************************
 * Load initial UI and events
 *******************************/
renderCards();
renderReportsList();
// ... el resto de tu JS ...
</script>

</body>
</html>
