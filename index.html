<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Departamento de Territorio - Cuatro Plazas</title>
<style>
    body { font-family: Arial; margin: 0; background: #f4f4f4; color: #333; }
    header { background: #1a4b27; padding: 20px; display: flex; justify-content: space-between; align-items: center; color: white; font-size: 22px; font-weight: bold; }
    .login-btn { background: white; color: #1a4b27; border: none; padding: 10px 18px; border-radius: 10px; font-size: 16px; cursor: pointer; font-weight: bold; }
    .login-btn.logout { background: #d62828; color: white; }
    .login-btn:hover { background: #e8e8e8 }
    .container { padding: 20px }
    .grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 15px; }
    .btn-card { background: white; border-radius: 15px; padding: 25px 10px; text-align: center; font-size: 18px; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer; transition: 0.2s; }
    .btn-card:hover { transform: scale(1.05) }
    .emoji { font-size: 45px; display: block; margin-bottom: 8px; }
</style>
</head>
<body>

<header>
    Departamento de Territorio
    <button class="login-btn" id="btnLogin" onclick="irLogin()">Iniciar sesiÃ³n</button>
</header>

<div class="container">
    <div class="grid">

        <div class="btn-card" id="btnTablero" onclick="location.href='tablero.html'">
            <span class="emoji">ğŸ“¢</span> Tablero de anuncios
        </div>

        <div class="btn-card" id="btnInformar" onclick="location.href='informar.html'">
            <span class="emoji">ğŸ“</span> Informar territorio
        </div>

        <div class="btn-card" id="btnPendientes" onclick="location.href='pendientes_admin.html'">
            <span class="emoji">ğŸŸ </span> Pendientes
        </div>

        <div class="btn-card" id="btnProximas" onclick="location.href='proximas.html'">
            <span class="emoji">ğŸ“…</span> PrÃ³ximas salidas
        </div>

        <div class="btn-card" id="btnMapa" onclick="location.href='mapa.html'">
            <span class="emoji">ğŸ—ºï¸</span> Mapa interactivo
        </div>

        <div class="btn-card" id="btnSug" onclick="location.href='sugerencia.html'">
            <span class="emoji">ğŸ’¡</span> Sugerencias
        </div>

        <div class="btn-card" id="btnReportes" onclick="location.href='reportes.html'">
            <span class="emoji">ğŸ“Š</span> Reportes
        </div>

    </div>
</div>

<script>
const sesion = JSON.parse(localStorage.getItem("sesion") || "null");
const rol = sesion?.rol?.toLowerCase() || "invitado";
const btnLogin = document.getElementById("btnLogin");

// Cambiar botÃ³n
if(sesion){
  btnLogin.textContent = "Salir ("+sesion.nombre+")";
  btnLogin.classList.add("logout");
}else{
  btnLogin.textContent = "Iniciar sesiÃ³n";
}

// Permisos por rol
const permisos = {
  invitado: ["btnProximas","btnTablero","btnMapa","btnSug"],
  conductor: ["btnProximas","btnTablero","btnMapa","btnSug","btnInformar","btnReportes"],
  admin: ["btnProximas","btnTablero","btnMapa","btnSug","btnInformar","btnReportes","btnPendientes"]
};

// Ocultar todos
["btnProximas","btnTablero","btnMapa","btnSug","btnInformar","btnReportes","btnPendientes"].forEach(id=>{
  document.getElementById(id).style.display="none";
});

// Mostrar permitidos
(permisos[rol]||[]).forEach(id=>{
  document.getElementById(id).style.display="block";
});

// Login/Logout
function irLogin(){
  if(sesion){
    localStorage.removeItem("sesion");
    location.reload();
  }else{
    location.href="login.html";
  }
}
</script>
</body>
</html>